<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngularJSを導入することと、恋のときめきと一歩踏み出す苦しみと。 - Wantedly Engineer Blog</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="/favicon-8030cb16.png" rel="icon" type="image/png">
    <meta property="fb:app_id" content="234170156611754">
    <meta property="og:image" content="http://engineer.wantedly.com/wantedly-sticker2-9bf5acdc.png">
    <link href="/stylesheets/application-b5fca3c2.css" media="screen" rel="stylesheet" type="text/css" />
    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12847756-21']);
    _gaq.push(['_setDomainName', 'wantedly.com']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </head>
  <body>
    <header class="jumbotron cover-image center">
      <h1 class="graduate"><a href="/">Wantedly Engineer Blog</a></h1>
      <p>Wantedly 開発チームブログ</p>
    </header>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8">
            <div class="page-header clearfix">
    <h2>
      <div class="article-title">
        AngularJSを導入することと、恋のときめきと一歩踏み出す苦しみと。
      </div>
    </h2>
    <div class="article-avatar">
      <a href="https://www.wantedly.com/users/14000">
        <img src="https://www.wantedly.com/users/14000/avatar" class="avatar" />
      </a>
      <span class='date'>31-Mar-2014</span>
    </div>
    <div class="pull-right social-links">
      <iframe src="//www.facebook.com/plugins/like.php?href=http://engineer.wantedly.com/2014/03/31/angular-and-love.html&amp;width=80&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=20&amp;appId=234170156611754", scrolling="no", frameborder="0", style="border:none; overflow:hidden; width:110px; height:20px;", allowTransparency="true"></iframe>
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="imaimiami" data-url="http://engineer.wantedly.com/2014/03/31/angular-and-love.html">Tweet</a>
      <a href="http://b.hatena.ne.jp/entry/http://engineer.wantedly.com/2014/03/31/angular-and-love.html" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
      
        <iframe src="http://ghbtns.com/github-btn.html?user=imaimiami&amp;type=follow&amp;count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe>
      
    </div>
  </div>
  <div class="article">
    <h4>春です。</h4>

<p>こんにちは、春ですね。</p>

<p>いつから春なんだっけと思って、近くの人に聞いてみたら「花粉が飛んだら春」だそうです。
来てますね、春。</p>

<p>春には花粉以外にも、「ときめき」が飛び交います。
朝のあの子の挨拶だったり、最近通い始めたスタバの店員さんの笑顔、そして、
Angular.jsのUIバインディングのスマートさにときめきます。</p>

<p><img alt="ios_image" src="/images/2014-03-31/angular-88b549d2.gif" /></p>

<p>「あの子と話せたらハッピーだろうな」、「うちのサイトのDOMもバリバリ動かしたらカッコいいだろうな」
とか春の陽気はポジティブな妄想を誘います。
ただ、その妄想を現実に落としこむは簡単なことではなく、冬までに降り積もったシガラミが邪魔をします。
中学時代に奇跡的にもらったラブレター、押入れに密かにしまわれているトレーディングカード、
そして、jQueryで書かれたコードだったりが邪魔します。でも、変わらなくちゃ手に入れられないものもあります。</p>

<h4>AngularJSを導入する</h4>

<p>AngularJSを導入するにあたって、
まっさらな状態からの構築なら良いのですが、既存のサービスに導入となると戸惑います。
自分も最初はjQueryとぶつかって難しいよねとか思ってました。</p>

<p>でも、意外とそうでもないです。</p>

<p>例えば、あなたのサイトで使われまくっている<code>cool-select</code>という超coolなパーツがあったとして、</p>

<p>JS</p>
<pre class="highlight javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.cool-select&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Cool!&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p>HTML</p>
<pre class="highlight html"><span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;tool in tools&quot;</span> <span class="na">class=</span><span class="s">&quot;animate&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>{{tool.name}}<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;cool-select&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>どのくらい好き？<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;normal&quot;</span><span class="nt">&gt;</span>いや、普通に<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;straw&quot;</span><span class="nt">&gt;</span>ストローで飲むくらい好き<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</pre>
<p>実装のされ方にもよると思いますが、この<code>ng-repeat</code>の中で使用しているonChangeイベントはbindされません。
ブラウザすら<code>Cool!</code>と言ってくれません。悲しい。</p>

<p>こういう場合はDirectiveとして取り込んであげればいいと思います。</p>

<p>JS</p>
<pre class="highlight javascript"><span class="nx">ToolApp</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;coolSelect&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">restrict</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span>
    <span class="na">link</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">postLink</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">bigSelect</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>
</pre>
<p><code>restrict: &#39;A&#39;</code>は属性指定です。<code>big-select</code>という属性のある要素を指すことになります。
<code>link</code>は<code>ng-repeat</code>のイテレーションのたびに呼び出されます。  </p>

<p>AngularJSはjQueryが読み込まれいる場合、<code>angular.element</code>からjQueryのfunctionを呼び出せます。
なのでjQueryの時のコードと同じように<code>.on</code>でbindしてます。</p>

<p><a href="http://docs.angularjs.org/api/ng/function/angular.element">AngularJS: API: angular.element</a></p>

<p>HTML</p>
<pre class="highlight html"><span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;tool in tools&quot;</span> <span class="na">class=</span><span class="s">&quot;animate&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>{{tool.name}}<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">big-select=</span><span class="s">&quot;Nice&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;tool.like&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>どのくらい好き？<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;normal&quot;</span><span class="nt">&gt;</span>いや、普通に<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;straw&quot;</span><span class="nt">&gt;</span>ストローで飲むくらい好き<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</pre>
<p>これで<code>onChange</code>イベントをbindすることが出来ました。
おまけで<code>cool-select</code>に値を渡せるようにしています。</p>

<h4>補足</h4>

<p>今回使用したコードはすべて以下にあります。動くと思います。</p>

<p><a href="https://gist.github.com/imaimiami/9722407">https://gist.github.com/imaimiami/9722407</a></p>

<p>AngularJS入門は結局公式が良かったです。良い記事があれば教えてください。</p>

<p><a href="http://docs.angularjs.org/tutorial">AngularJS: Tutorial: Tutorial</a></p>

<p>また、冒頭のGIF画像は、チームの生産性のためならばどんなチャレンジもいとわない
<a href="/2014/03/27/setup-elasticsearch-cluster-on-ec2-with-chef.html">同僚</a>に敬意を表したものです。</p>

<p>以上、また会いましょう！</p>

  </div>

  <hr>
  <div>
    エンジニア採用中！<a href="https://www.wantedly.com/companies/wantedly/projects">オフィスに遊びに来てお話しませんか？</a>
  </div>
  <hr>

  <iframe src="//www.facebook.com/plugins/like.php?href=http://engineer.wantedly.com/2014/03/31/angular-and-love.html&amp;width=80&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=20&amp;appId=234170156611754", scrolling="no", frameborder="0", style="border:none; overflow:hidden; width:110px; height:20px;", allowTransparency="true"></iframe>
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="imaimiami" data-url="http://engineer.wantedly.com/2014/03/31/angular-and-love.html">Tweet</a>
  <a href="http://b.hatena.ne.jp/entry/http://engineer.wantedly.com/2014/03/31/angular-and-love.html" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
  
    <iframe src="http://ghbtns.com/github-btn.html?user=imaimiami&amp;type=follow&amp;count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe>
  

        </div>
        <div class="col-xs-12 col-md-3 col-md-offset-1">
          <div class="store-banner">
            <a href="https://wantedly.stores.jp/">
              <img src="https://huntr-static.s3.amazonaws.com/engineer_blog/storeBanner.png" alt="storeBanner" width="260px" height="162px">
            </a>
          </div>
          <div class="side-article">
            <h4>エンジニア採用中！</h4>
            <a href="https://www.wantedly.com/companies/wantedly/projects">オフィスに遊びに来てお話しませんか？</a>
          </div>
          <iframe frameborder='0' height='305px' name='wantedly_project_widget_29459' scrolling='no' src='https://www.wantedly.com/projects/29459/widget' style='border: none; max-width: 100%; min-width: 240px; width: 540px;'></iframe>
          <iframe frameborder='0' height='305px' name='wantedly_project_widget_25674' scrolling='no' src='https://www.wantedly.com/projects/25674/widget' style='border: none; max-width: 100%; min-width: 240px; width: 540px;'></iframe>
          <div class="side-article">
            <h4>最近の記事</h4>
            <ul>
              
                <li><a href="/2016/04/30/watch-app.html">Apple Watchアプリをリリースしていました</a></li>
              
                <li><a href="/2016/04/26/ui-crunch-08.html">Wantedlyのデザイン事情について UI Crunch #8で発表しました！</a></li>
              
                <li><a href="/2016/04/21/meguro-es-03.html">Wantedlyの最近のReact事情についてMeguro.es #3で発表しました!</a></li>
              
                <li><a href="/2016/04/14/reactive-swift-meetup.html">Reactive Swift Meetup @Wantedlyを開催しました！</a></li>
              
                <li><a href="/2016/04/01/four-years.html">2016年のWantedlyアーキテクチャ (1)</a></li>
              
                <li><a href="/2016/03/11/spring-internship-2016.html">Wantedly Spring Internship 2016</a></li>
              
                <li><a href="/2016/02/22/yochiyochi-python.html">よちよちPythonしてきた〜プログラミングは料理と一緒〜</a></li>
              
                <li><a href="/2016/01/24/development-camp.html">Wantedly エンジニアチームは湯河原温泉で開発合宿を行いました！</a></li>
              
                <li><a href="/2015/12/17/rails-sql.html">RailsエンジニアのためのSQLチューニング速習会</a></li>
              
                <li><a href="/2015/10/13/learn-sketch.html">デザイナーとエンジニア間のコミュニケーションコストを下げる試み</a></li>
              
            </ul>
          </div>
          <!--
            <div class="side-article">
              <h4>Tags</h4>
              <ul>
                
                  <li>- <a href="/tags/elasticsearch.html">elasticsearch</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/elasticsearch-chef-ec2-nginx.html">elasticsearch chef ec2 nginx</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/elasticsearch-chef-aws.html">elasticsearch chef aws</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/vagrant.html">vagrant</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/packer.html">packer</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/serf.html">serf</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/consul.html">consul</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/terraform.html">terraform</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/vault.html">vault</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/atlas.html">atlas</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/hashicorp.html">hashicorp</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/ios.html">iOS</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/swift.html">Swift</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/rails.html">Rails</a> <small class="gray">(3)</small></li>
                
                  <li>- <a href="/tags/angularjs.html">AngularJS</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/electron.html">Electron</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/android.html">Android</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/sketch.html">Sketch</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/ui.html">UI</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/web.html">Web</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/design.html">Design</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/sql.html">SQL</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/postgresql.html">PostgreSQL</a> <small class="gray">(2)</small></li>
                
                  <li>- <a href="/tags/development.html">Development</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/camp.html">Camp</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/yochiyochi.html">yochiyochi</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/よちよちアイドル.html">よちよちアイドル</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/インターンシップ.html">インターンシップ</a> <small class="gray">(1)</small></li>
                
                  <li>- <a href="/tags/3day-intern.html">3day intern</a> <small class="gray">(1)</small></li>
                
              </ul>
            </div>
          -->
          <!--
            <div class="side-article">
              <h4>By Year</h4>
              <ul>
                
                  <li>- <a href="/2016.html">2016</a> <small class="gray">(8)</small></li>
                
                  <li>- <a href="/2015.html">2015</a> <small class="gray">(5)</small></li>
                
                  <li>- <a href="/2014.html">2014</a> <small class="gray">(9)</small></li>
                
                  <li>- <a href="/2013.html">2013</a> <small class="gray">(2)</small></li>
                
              </ul>
            </div>
          -->
        </div>
      </div>
    </div>
    <footer class="container center">
      <hr/>
      <p>2013 © Wantedly, Inc., All Rights Reserved.</p>
    </footer>

    <script src="/javascripts/application-da39a3ee.js" type="text/javascript"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

  </body>
</html>
